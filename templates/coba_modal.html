<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css')}}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/coba.css') }}" />
  </head>
  <body>
    
    <section>
      <div class="container mt-5">
        <div class="row">
          <div class="content-title">
            <h1>Batik Gallery</h1>
          </div>
        </div>
      </div>
      {% for mobil in mobil_list %}
      <div class="container mt-5">
        <div class="row text-center align-items-center justify-items-center" id="gallery-batik">
          <div class="col-12 col-sm-6 col-md-4 d-flex justify-content-center pb-5">
            <div class="container-batik">
              <div class="batik-img">
                {% if mobil[10] %}
                <img src="{{ url_for('static', filename='img/data_upload/' + mobil[10]) }}" alt="batik-img" />
                {% else %}
                <span>Gambar tidak tersedia</span>
                {% endif %}
              </div>
              <div class="main-batik">
                <button type="button" class="btn btn-primary show-details" data-bs-toggle="modal" data-bs-target="#modalQuickview" data-id="${event.id}">
                  <strong tabindex="0">{{ mobil[2] }}</strong>
                </button>
                <div class="batik-daerah">
                  <p tabindex="0">{{ mobil[5] }}</p>
                </div>
                <p tabindex="0">{{ mobil[8] }}</p>
              </div>
              </div>
              </div>
            {% endfor %}
        </div>
      </div>
      <div class="container mb-5">
        <div class="row">
          <div class="col text-center">
            <a href="{{url_for('detail')}}"><button class="btn btn-danger">Hallo guys</button></a>
          </div>
        </div>
      </div>
    </section>

    <section>
      <button type="button" class="btn btn-primary show-details" data-bs-toggle="modal" data-bs-target="#modalQuickview" data-event-id="1">Ini Tombol</button>
    </section>
    <div class="modal fade" id="modalQuickview" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <div class="container-fluid">
              <div class="row">
                <div class="col text-right">
                  <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="product-details-gallery-area">
                    <div class="product-large-image modal-product-image-large">
                      <div class="product-image-large-single">
                        <img class="img-fluid" id="event-image" src="" alt="" />
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="product-details-content-area">
                    <div class="product-details-text">
                      <h4 class="title" id="event-title"></h4>
                      <div class="price" id="event-price"></div>
                      <p id="event-description"></p>
                    </div>
                    <!-- End Product Details Text Area-->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script>
      $(document).ready(function () {
        $("#modalQuickview").on("show.bs.modal", function (event) {
          var button = $(event.relatedTarget);
          var eventId = button.data("event-id");

          $.ajax({
            url: "/api/event/" + eventId,
            method: "GET",
            success: function (data) {
              if (data.error) {
                alert(data.error);
              } else {
                $("#event-image").attr("src", "/static/img/data_upload/" + data.gambar);
                $("#event-title").text(data.nama_event);
                $("#event-price").text("$" + data.harga);
                $("#event-description").text(data.deskripsi);
              }
            },
            error: function (error) {
              alert("Could not fetch event details.");
            },
          });
        });
      });
    </script>
  </body>
</html>
